### 什么是比特币中的 P2P 网络技术？

P2P网络是指网络上每一个参与进来的用户都可以作为一个节点，每个节点保存完整的交易记录，无需中央服务器，达到去中心化的目的。

### 区块链在比特币中起什么作用？

作为一个分布式账本，以链式结构存储交易信息，并通过P2P网络保存到每一个节点上，确保数据的不可篡改和一致性。

### 比特币如何使用工作量证明机制？

节点或矿工，通过证明复杂数学问题，来竞争记账权，使得网络攻击需要较高门槛，保证了网络的安全性。

### 最长链原则是如何在比特币中应用的？

在比特币网络中，如果同时有多个有效的分叉，网络只会取最长的那条链作为主链。

### 比特币系统中的分叉是如何发生的？

由于软件升级，但是网络中节点并不会全部升级，链上就会存在多个版本的软件在运行，所以会导致分叉，分叉又分为硬分叉和软分叉。

硬分叉是指无法兼容旧版本的分叉，比如将区块从1M扩容到4M，那么必然会导致新版本的数据无法被老版本使用，不被认可，从而永久分叉，不可恢复。 BCH就是因此从BTC分叉而来的。

软分叉是指新版本的软件是能够兼容老版本的，新版本的数据老版本仍然可以认可，所以虽然有新旧版本在链上运行，但是不会导致产生两条链。

### 硬分叉与软分叉有何区别？

硬分叉是指无法兼容旧版本的分叉，比如将区块从1M扩容到4M，那么必然会导致新版本的数据无法被老版本使用，不被认可，从而永久分叉，不可恢复。 BCH就是因此从BTC分叉而来的。

软分叉是指新版本的软件是能够兼容老版本的，新版本的数据老版本仍然可以认可，所以虽然有新旧版本在链上运行，但是不会导致产生两条链。

### 什么是比特币的 Coinbase 交易？

Coinbase是指每个区块中的第一笔交易，他是给矿工提供的挖矿奖励，只有Output，没有input，记录了给矿工的手续费和奖励

### UTXO 模型是什么？

UTXO unspent Transaction output 未花费的交易输出。这是因为比特币不同于传统账户模型，没有余额的概念，采用UTXO作为账户余额机制，这个模型在交易中，每一笔账户的收入都是一条UTXO记录，账户总余额由所有的UTXO记录加起来计算得出，在支出时同样从这些UTXO中找到足够支出的金额作为output。如果一笔UTXO大于支出数目，那么剩下的金额会作为新的一笔UTXO记入账户的input

### 比特币如何解决双花问题？

使用UTXO模型可以有效避免双花问题，其核心在于，同样的一笔UTXO，只会有一笔能够确认，当一笔交易被广播到网络中之后，接收节点会验证这笔交易，检查是否存在于UTXO数据库中，如果不存在则验证失败。

同时比特币采用最长链原则，有多比消费同一UTXO的交易只可能有一笔被打包进入主链。

还可采用延迟确认机制，当6个区块被确认后，那么说明之前的数据基本上不可能被篡改了。

其次，网络中每个节点都是独立校验每一笔交易，如果有一个UTXO被多次消费，自动会拒绝重复交易。

### 什么是比特币的工作量证明（PoW）机制？

节点或矿工，通过证明复杂数学问题，来竞争记账权，使得网络攻击需要较高门槛，保证了网络的安全性。

### 比特币地址是如何生成的？

比特币地址是用户的私钥通过椭圆曲线生成公钥，将公钥通过哈希处理后，再通过Base58编码生成的一串字符串。

1. **私钥生成公钥**

- 用户随机生成一个私钥（256位数字）。
- 通过椭圆曲线（secp256k1）算法，计算得到对应的公钥。

2. **公钥哈希处理**

- 首先对**公钥**做**SHA-256**哈希，得到32字节摘要。
- 再对SHA-256结果做**RIPEMD-160**哈希，得到20字节的“公钥哈希”（`Hash160`）。

3. **添加版本字节**

- 主网普通地址（P2PKH）前面加上1字节“版本号”（0x00）。

4. **加上校验码**

- 对“版本字节+Hash160”整体，再做两次SHA-256哈希，取前4字节，作为校验码。

5. **拼接并Base58编码**

- 把**版本字节+公钥哈希+校验码**拼接为25字节。
- 用Base58Check编码生成最终地址字符串。

### 隔离见证（SegWit）是什么，它如何工作？

隔离见证属于比特币的一种软分叉升级，可以解决交易延展性问题，同时提高区块容量。

其主要内容是将签名数据从交易中分离出来，交易ID生成时不再使用签名数据，所以同一笔交易的ID将不会改变。因此解决了交易延展性攻击：即攻击者用一个私钥生成的两个公钥同时发起交易，产生两个不同的交易ID，实际上是同一笔交易，但是一笔通过交易所发起，一笔直接在链上发起。在第二笔交易先被链上处理后，交易所发起的交易还没有收到确认消息。攻击者会要求交易所重新发起取现交易，谎称这笔取现交易在网络上没有被通过，然后重复上述攻击手段。门头沟事件疑似就是这样产生的。

### 比特币网络是如何保护用户隐私的？

比特币网络上都是通过地址进行交易，地址本身不关联任何用户信息。并且地址生成也很简单，可以生成很多个地址。

### 比特币的难度调整是如何工作的？

每2016个区块调整一次，根据全网算力大小进行调整，控制在10分钟左右生成一个区块。